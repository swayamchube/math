\documentclass[10pt]{article}
% \usepackage{./arxiv}

\title{Gorenstein Rings\\\small{Notes for the course MA 842: Topics in Algebra II}}
\author{H. Ananthnarayan\\\small\textsc{Scribe:} Swayam Chube}
\date{Last Updated: \today}

\usepackage[utf8]{inputenc} % allow utf-8 input
\usepackage[T1]{fontenc}    % use 8-bit T1 fonts
\usepackage{hyperref}       % hyperlinks
\usepackage{url}            % simple URL typesetting
\usepackage{booktabs}       % professional-quality tables
\usepackage{amsfonts}       % blackboard math symbols
\usepackage{nicefrac}       % compact symbols for 1/2, etc.
\usepackage{microtype}      % microtypography
\usepackage{graphicx}
\usepackage{natbib}
\usepackage{doi}
\usepackage{amssymb}
\usepackage{bbm}
\usepackage{amsthm}
\usepackage{amsmath}
\usepackage{xcolor}
\usepackage{theoremref}
\usepackage{enumitem}
\usepackage{mathpazo}
% \usepackage{euler}
\usepackage{mathrsfs}
\setlength{\marginparwidth}{2cm}
\usepackage{todonotes}
\usepackage{stmaryrd}
\usepackage[all,cmtip]{xy} % For diagrams, praise the Freyd-Mitchell theorem 
\usepackage{marvosym}
\usepackage{geometry}
\usepackage{titlesec}
\usepackage{mathtools}
\usepackage{tikz}
\usetikzlibrary{cd}

\renewcommand{\qedsymbol}{$\blacksquare$}

% Uncomment to override  the `A preprint' in the header
% \renewcommand{\headeright}{}
% \renewcommand{\undertitle}{}
% \renewcommand{\shorttitle}{}

\hypersetup{
    pdfauthor={Lots of People},
    colorlinks=true,
}

\newtheoremstyle{thmstyle}%               % Name
  {}%                                     % Space above
  {}%                                     % Space below
  {}%                             % Body font
  {}%                                     % Indent amount
  {\bfseries\scshape}%                            % Theorem head font
  {.}%                                    % Punctuation after theorem head
  { }%                                    % Space after theorem head, ' ', or \newline
  {\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}%                                     % Theorem head spec (can be left empty, meaning `normal')

\newtheoremstyle{defstyle}%               % Name
  {}%                                     % Space above
  {}%                                     % Space below
  {}%                                     % Body font
  {}%                                     % Indent amount
  {\bfseries\scshape}%                            % Theorem head font
  {.}%                                    % Punctuation after theorem head
  { }%                                    % Space after theorem head, ' ', or \newline
  {\thmname{#1}\thmnumber{ #2}\thmnote{ (#3)}}%                                     % Theorem head spec (can be left empty, meaning `normal')

\theoremstyle{thmstyle}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}

\theoremstyle{defstyle}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{porism}[theorem]{Porism}
\newtheorem{remark}[theorem]{Remark}
\newtheorem{interlude}[theorem]{Interlude}
\newtheorem{example}[theorem]{Example}
\newtheorem*{notation}{Notation}
\newtheorem*{claim}{Claim}

% Common Algebraic Structures
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\bbC}{\mathbb{C}} 
\newcommand{\K}{\mathbb{K}} % Base field which is either \R or \bbC
\newcommand{\calA}{\mathcal{A}} % Banach Algebras
\newcommand{\calB}{\mathcal{B}} % Banach Algebras
\newcommand{\calI}{\mathcal{I}} % ideal in a Banach algebra
\newcommand{\calJ}{\mathcal{J}} % ideal in a Banach algebra
\newcommand{\frakM}{\mathfrak{M}} % sigma-algebra
\newcommand{\calO}{\mathcal{O}} % Ring of integers
\newcommand{\bbA}{\mathbb{A}} % Adele (or ring thereof)
\newcommand{\bbI}{\mathbb{I}} % Idele (or group thereof)

% Categories
\newcommand{\catTopp}{\mathbf{Top}_*}
\newcommand{\catGrp}{\mathbf{Grp}}
\newcommand{\catTopGrp}{\mathbf{TopGrp}}
\newcommand{\catSet}{\mathbf{Set}}
\newcommand{\catTop}{\mathbf{Top}}
\newcommand{\catRing}{\mathbf{Ring}}
\newcommand{\catCRing}{\mathbf{CRing}} % comm. rings
\newcommand{\catMod}{\mathbf{Mod}}
\newcommand{\catMon}{\mathbf{Mon}}
\newcommand{\catMan}{\mathbf{Man}} % manifolds
\newcommand{\catDiff}{\mathbf{Diff}} % smooth manifolds
\newcommand{\catAlg}{\mathbf{Alg}}
\newcommand{\catRep}{\mathbf{Rep}} % representations 
\newcommand{\catVec}{\mathbf{Vec}}

% Group and Representation Theory
\newcommand{\chr}{\operatorname{char}}
\newcommand{\Aut}{\operatorname{Aut}}
\newcommand{\GL}{\operatorname{GL}}
\newcommand{\im}{\operatorname{im}}
\newcommand{\tr}{\operatorname{tr}}
\newcommand{\id}{\mathbf{id}}
\newcommand{\cl}{\mathbf{cl}}
\newcommand{\Gal}{\operatorname{Gal}}
\newcommand{\Tr}{\operatorname{Tr}}
\newcommand{\sgn}{\operatorname{sgn}}
\newcommand{\Sym}{\operatorname{Sym}}
\newcommand{\Alt}{\operatorname{Alt}}

% Commutative and Homological Algebra
\newcommand{\spec}{\operatorname{spec}}
\newcommand{\mspec}{\operatorname{m-spec}}
\newcommand{\Spec}{\operatorname{Spec}}
\newcommand{\MaxSpec}{\operatorname{MaxSpec}}
\newcommand{\Tor}{\operatorname{Tor}}
\newcommand{\tor}{\operatorname{tor}}
\newcommand{\Ann}{\operatorname{Ann}}
\newcommand{\Supp}{\operatorname{Supp}}
\newcommand{\Hom}{\operatorname{Hom}}
\newcommand{\End}{\operatorname{End}}
\newcommand{\coker}{\operatorname{coker}}
\newcommand{\limit}{\varprojlim}
\newcommand{\colimit}{%
  \mathop{\mathpalette\colimit@{\rightarrowfill@\textstyle}}\nmlimits@
}
\makeatother


\newcommand{\fraka}{\mathfrak{a}} % ideal
\newcommand{\frakb}{\mathfrak{b}} % ideal
\newcommand{\frakc}{\mathfrak{c}} % ideal
\newcommand{\frakf}{\mathfrak{f}} % face map
\newcommand{\frakg}{\mathfrak{g}}
\newcommand{\frakh}{\mathfrak{h}}
\newcommand{\frakm}{\mathfrak{m}} % maximal ideal
\newcommand{\frakn}{\mathfrak{n}} % naximal ideal
\newcommand{\frakp}{\mathfrak{p}} % prime ideal
\newcommand{\frakq}{\mathfrak{q}} % qrime ideal
\newcommand{\fraks}{\mathfrak{s}}
\newcommand{\frakt}{\mathfrak{t}}
\newcommand{\frakz}{\mathfrak{z}}
\newcommand{\frakA}{\mathfrak{A}}
\newcommand{\frakI}{\mathfrak{I}}
\newcommand{\frakJ}{\mathfrak{J}}
\newcommand{\frakK}{\mathfrak{K}}
\newcommand{\frakL}{\mathfrak{L}}
\newcommand{\frakN}{\mathfrak{N}} % nilradical 
\newcommand{\frakO}{\mathfrak{O}} % dedekind domain
\newcommand{\frakP}{\mathfrak{P}} % Prime ideal above
\newcommand{\frakQ}{\mathfrak{Q}} % Qrime ideal above 
\newcommand{\frakR}{\mathfrak{R}} % jacobson radical
\newcommand{\frakU}{\mathfrak{U}}
\newcommand{\frakV}{\mathfrak{V}}
\newcommand{\frakW}{\mathfrak{W}}
\newcommand{\frakX}{\mathfrak{X}}

% General/Differential/Algebraic Topology 
\newcommand{\scrA}{\mathscr{A}}
\newcommand{\scrB}{\mathscr{B}}
\newcommand{\scrF}{\mathscr{F}}
\newcommand{\scrM}{\mathscr{M}}
\newcommand{\scrN}{\mathscr{N}}
\newcommand{\scrP}{\mathscr{P}}
\newcommand{\scrO}{\mathscr{O}} % sheaf
\newcommand{\scrR}{\mathscr{R}}
\newcommand{\scrS}{\mathscr{S}}
\newcommand{\bbH}{\mathbb H}
\newcommand{\Int}{\operatorname{Int}}
\newcommand{\psimeq}{\simeq_p}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\RP}{\mathbb{R}\text{P}}
\newcommand{\CP}{\mathbb{C}\text{P}}

% Miscellaneous
\newcommand{\wh}[1]{\widehat{#1}}
\newcommand{\calM}{\mathcal{M}}
\newcommand{\calP}{\mathcal{P}}
\newcommand{\onto}{\twoheadrightarrow}
\newcommand{\into}{\hookrightarrow}
\newcommand{\Gr}{\operatorname{Gr}}
\newcommand{\Span}{\operatorname{Span}}
\newcommand{\ev}{\operatorname{ev}}
\newcommand{\weakto}{\stackrel{w}{\longrightarrow}}

\newcommand{\define}[1]{\textcolor{blue}{\textit{#1}}}
\newcommand{\caution}[1]{\textcolor{red}{\textit{#1}}}
\newcommand{\important}[1]{\textcolor{red}{\textit{#1}}}
\renewcommand{\mod}{~\mathrm{mod}~}
\renewcommand{\le}{\leqslant}
\renewcommand{\leq}{\leqslant}
\renewcommand{\ge}{\geqslant}
\renewcommand{\geq}{\geqslant}
\newcommand{\Res}{\operatorname{Res}}
\newcommand{\floor}[1]{\left\lfloor #1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil #1\right\rceil}
\newcommand{\gl}{\mathfrak{gl}}
\newcommand{\ad}{\operatorname{ad}}
\newcommand{\Stab}{\operatorname{Stab}}
\newcommand{\bfX}{\mathbf{X}}
\newcommand{\Ind}{\operatorname{Ind}}
\newcommand{\bfG}{\mathbf{G}}
\newcommand{\rank}{\operatorname{rank}}
\newcommand{\calo}{\mathcal{o}}
\newcommand{\frako}{\mathfrak{o}}
\newcommand{\Cl}{\operatorname{Cl}}

\newcommand{\idim}{\operatorname{idim}}
\newcommand{\pdim}{\operatorname{pdim}}
\newcommand{\Ext}{\operatorname{Ext}}
\newcommand{\co}{\operatorname{co}}
\newcommand{\bfO}{\mathbf{O}}
\newcommand{\bfF}{\mathbf{F}} % Fitting Subgroup
\newcommand{\Syl}{\operatorname{Syl}}
\newcommand{\nor}{\vartriangleleft}
\newcommand{\noreq}{\trianglelefteqslant}
\newcommand{\subnor}{\nor\!\nor}
\newcommand{\Soc}{\operatorname{Soc}}
\newcommand{\core}{\operatorname{core}}
\newcommand{\Sd}{\operatorname{Sd}}
\newcommand{\mesh}{\operatorname{mesh}}
\newcommand{\sminus}{\setminus}
\newcommand{\diam}{\operatorname{diam}}
\newcommand{\Ass}{\operatorname{Ass}}
\newcommand{\projdim}{\operatorname{proj~dim}}
\newcommand{\injdim}{\operatorname{inj~dim}}
\newcommand{\gldim}{\operatorname{gl~dim}}
\newcommand{\embdim}{\operatorname{emb~dim}}
\newcommand{\hght}{\operatorname{ht}}
\newcommand{\depth}{\operatorname{depth}}
\newcommand{\ul}[1]{\underline{#1}}
\newcommand{\type}{\operatorname{type}}

% \renewcommand{\familydefault}{\sfdefault} % Do you want this font? 

\geometry {
    margin = 1in
}

\titleformat
{\section}
[block]
{\Large\bfseries\sffamily}
{\S\thesection}
{0.5em}
{\centering}
[]


\titleformat
{\subsection}
[block]
{\normalfont\bfseries\sffamily}
{\S\S}
{0.5em}
{\centering}
[]


\begin{document}
\maketitle
\tableofcontents

\section{Injective Modules}

\subsection{Basic Properties of Injective Modules}

\begin{definition}
    Let $R$ be a ring. An $R$-module $E$ is said to be \define{injective} if for every inclusion of $R$-modules $N\into M$ and an $R$-linear map $N\to E$, there is an $R$-linear map $M\to E$ making
    \begin{equation*}
        \xymatrix {
            0\ar[r] & N\ar[r]\ar[d] & M\ar@{.>}[ld]^{\exists}\\
            & E & 
        }
    \end{equation*}
    commute.

    An $R$-module $M$ is said to be \define{divisible} if 
    \begin{equation*}
        \mu_a: M\longrightarrow M\qquad m\longmapsto am
    \end{equation*}
    is surjective for each non-zerodivisor $a\in R$.
\end{definition}

\begin{remark}
    It is easy to see that $E$ is injective if and only if given any inclusion of $R$-modules $N\into M$, the induced map $\Hom_R(M, E)\to\Hom_R(N, E)$ is surjective. Further, since $\Hom_R(-, E)$ is always left-exact, we have: 
    \begin{quotation}
        An $R$-module $E$ is injective if and only if $\Hom_R(-, E)$ is an exact functor.
    \end{quotation}
\end{remark}

\begin{proposition}
    A direct product of injective modules is injective.
\end{proposition}
\begin{proof}
    This follows from the natural isomorphism of functors
    \begin{equation*}
        \Hom_R\left(-,\prod_{\lambda\in\Lambda} E_\lambda\right)\cong\prod_{\lambda\in\Lambda} \Hom_R(-, E_\lambda).\qedhere
    \end{equation*}
\end{proof}

\begin{proposition}\thlabel{prop:injective-is-divisible}
    Every injective $R$-module is divisible. 
\end{proposition}
\begin{proof}
    Let $E$ be $R$-injective, $x\in E$, and $a\in R$ a non-zerodivisor. Let $\varphi: R\to E$ be the unique $R$-linear map sending $1\mapsto x$. Since $R\xrightarrow{\mu_a^R} R$ is injective, there is a map $\wt\varphi: R\to E$ such that $\wt\varphi\circ\mu_a^R = \varphi$. In particular, $a\wt\varphi(1) = x$, whence $\mu_a^E: E\to E$ is surjective, as desired.
\end{proof}

\begin{theorem}[Baer's Criterion]\thlabel{thm:baer-criterion}
    Let $R$ be a ring and $E$ an $R$-module. Then $E$ is injective if and only if for every ideal $I\noreq R$ and an $R$-linear map $f: I\to E$, there is an $R$-linear map $F: R\to E$ such that $F|_I = f$.
\end{theorem}
\begin{proof}
    The forward implication is clear. We shall prove the converse. Let $0\to N\to M$ be exact and $f: N\to E$ be an $R$-linear map. Consider the poset 
    \begin{equation*}
        \Omega = \left\{(P, g)\colon N\le P\le M\text{ and }g: P\to E\text{ is $R$-linear extending $f$}\right\},
    \end{equation*}
    where $(P, g)\leqq(P', g')$ if $P\le P'$ and $g'|_P = g$.
    Using Zorn's lemma, choose a maximal element $(P, g)\in\Omega$. We claim that $P = M$. Suppose now and choose some $x\in M\setminus P$. Set $I = (P :_R x)\noreq R$ and consider the map 
    \begin{equation*}
        I\longrightarrow E\qquad a\mapsto g(ax).
    \end{equation*}
    This is well-defined and $R$-linear, whence it extends to an $R$-linear map $\varphi: R\to E$. Let $\alpha = \varphi(1)$ and define $F: P + Rx \to E$ by $F(p + ax) = g(p) + a\alpha$ for all $p\in P$ and $a\in R$. To see that this is well-defined, note that if $p_1 + a_1 x = p_2 + a_2 x$, then $a_1 - a_2\in I$, so that 
    \begin{equation*}
        g(p_2) - g(p_1) = g((a_1 - a_2)x) = (a_1 - a_2)\alpha\implies g(p_1) + a_1\alpha = g(p_2) + a_2\alpha.
    \end{equation*}
    The map $F$ is obviously $R$-linear and extends $g$, thereby contradicting the maximality of $(P, g)$. Hence, $P = M$ and $E$ is injective.
\end{proof}

\begin{corollary}
    An $R$-module $E$ is injective if and only if $\Ext^1_R\left(R/I, E\right) = 0$ for all ideals $I\noreq R$. \hfill\qedsymbol
\end{corollary}

\begin{remark}
    We note that it is not sufficient to check the equivalent condition of \thref{thm:baer-criterion} for finitely generated ideals. Indeed, let $R = \scrO(\bbC)$ the ring of entire functions, or $R = \calO_{\overline\Q}$ the ring of algebraic integers in $\bbC$. It is known that $R$ is a non-Noetherian B\'ezout domain. As such, due to \thref{inter:bass-papp-construction}, there is a family of $R$-injectives $\{E_i\}_{i = 1}^\infty$ such that $E = \bigoplus_i E_i$ is not injective.

    Since each $E_i$ is injective, it is divisible, consequently, $E$ is a divisible $R$-module. Moreover, since $R$ is a B\'ezout domain, every finitely generated ideal $I$ in $R$ is principal. It follows now that the equivalent condition of \thref{thm:baer-criterion} holds for $E$ but $E$ is not injective.
\end{remark}

\begin{proposition}
    Let $R$ be a PID. An $R$-module $E$ is injective if and only if it is divisible.
\end{proposition}
\begin{proof}
    The forward direction is clear from \thref{prop:injective-is-divisible}. Conversely, let $E$ be a divisible $R$-module and let $f: I\to E$ be $R$-linear where $I\noreq R$ is an ideal. If $I = 0$, then $f = 0$ and the zero map $R\to E$ extends $f$. If $I\ne 0$, then there is some $0\ne a\in R$ such that $I = (a)$. If $x = f(a)$, then choose $y\in E$ with $ay = x$ and let $F: R\to E$ be the unique $R$-linear map sending $1$ to $y$. It is clear that $R$ extends $f$ and hence $E$ is an injective $R$-module.
\end{proof}

\begin{proposition}
    Let $R$ be an integral domain. A torsion-free and divisible $R$-module is injective.
\end{proposition}
\begin{proof}
    Let $E$ be a torsion-free and divisible $R$-module. We shall use \thref{thm:baer-criterion} to show that $E$ is injective. Let $0\ne I\nor R$ be a proper ideal and $f: I\to E$ be $R$-linear. Choose some $0\ne a\in I$ and let $x\in E$ be the unique (since $E$ is torsion-free) element such that $ax = f(a)$. Let $F: R\to E$ be the unique $R$-linear map sending $1\mapsto x$. We contend that $F$ extends $f$. Indeed, for $0\ne b\in I$, 
    \begin{equation*}
        af(b) = bf(a) = abx\implies f(b) = bx = F(b),
    \end{equation*}
    as desired.
\end{proof}

\begin{lemma}
    Let $S$ be an $R$-algebra and $E$ an injective $R$-module. Then $\Hom_R(S, E)$ is an injective $S$-module.
\end{lemma}
\noindent\emph{Note.} $\Hom_R(S, E)$ is naturally an $S$-module under the action 
\begin{equation*}
    (s\cdot f)(s') = f(ss') \qquad\forall~s, s'\in S,~f\in\Hom_R(S, E).
\end{equation*}
\begin{proof}
    Let $0\to M'\to M\to M''\to 0$ be a short exact sequence of $S$-modules. Using the Hom-Tensor adjunction, we have 
    \begin{equation*}
        \xymatrix {
            0\ar[r] & \Hom_S\left(M'',\Hom_R(S, E)\right)\ar[r]\ar@{=}[d] & \Hom_S\left(M,\Hom_R(S, E)\right)\ar[r]\ar@{=}[d] & \Hom_S\left(M', \Hom_R(S, E)\right)\ar[r]\ar@{=}[d] & 0\\
            0\ar[r] & \Hom_R(M'\otimes_S S, E)\ar@{=}[d]\ar[r] & \Hom_R(M\otimes_S S, E)\ar@{=}[d]\ar[r] & \Hom_R(M''\otimes_S S, E)\ar@{=}[d]\ar[r] & 0\\
            0\ar[r] & \Hom_R(M', E)\ar[r] & \Hom_R(M, E)\ar[r] & \Hom_R(M'', E)\ar[r] & 0
        }
    \end{equation*}
    The exactness of the bottom row is a consequence of the $R$-injectivity of $E$. Thus the top row is exact and we have our desideratum.
\end{proof}

\begin{theorem}\thlabel{thm:embed-inside-injective}
    Every $R$-module can be embedded inside an $R$-injective.
\end{theorem}
\begin{proof}
    First, we show this for $R = \Z$. Let $M$ be a $\Z$-module, then $M\cong \bigoplus_I \Z/N$ for some submodule $N$ of $\bigoplus_I \Z$. There is a natural inclusion of $\Z$-modules $\bigoplus_I\Z\into\bigoplus_I\Q$ which induces an inclusion
    \begin{equation*}
        M\cong\frac{\bigoplus_I\Z}{N}\into \frac{\bigoplus_I\Q}{N}\eqcolon E
    \end{equation*}
    Being a quotient of a divisible module, $E$ is divisible and hence $\Z$-injective. 

    Now, let $R$ be any ring and $M$ an $R$-module. Then $M$ is naturally a $\Z$-module and admits a $\Z$-linear inclusion $\iota: M\into E$, where $E$ is a $\Z$-injective. Consider the map 
    \begin{equation*}
        \varphi: M\longrightarrow\Hom_{\Z}(R, E)\qquad m\longmapsto\varphi_m,
    \end{equation*}
    where $\varphi_m: R\to E$ is given by $\varphi_m(r) = f(rm)$. The map $\varphi$ is obviously $R$-linear and if $\varphi_m = 0$, then $f(m) = \varphi_m(1) = 0$, i.e., $m = 0$. As a result, $\varphi$ is injective and we have embedded $M$ inside an injective $R$-module.
\end{proof}

\begin{corollary}
    Let $E$ be an $R$-module. Then $E$ is injective if and only if every $R$-linear inclusion $E\into M$ splits.
\end{corollary}
\begin{proof}
    Suppose $E$ is injective.
    \begin{equation*}
        \xymatrix {
            0\ar[r] & E\ar[r]\ar@{=}[d] & M\ar@{.>}[ld]^{\exists}\\
            & E & 
        }
    \end{equation*}
    The above diagram constructs a splitting of $E\into M$.

    Conversely, suppose every $R$-linear inclusion $E\into M$ splits. Due to \thref{thm:embed-inside-injective}, we may choose $M$ to be injective, so that $E$ is a direct summand of $M$, whence $E$ is injective.
\end{proof}

\begin{proposition}
    Let $R$ be a Noetherian ring. A direct sum of injective $R$-modules is injective.
\end{proposition}
\begin{proof}
    Let $\{E_\lambda\}_{\lambda\in\Lambda}$ be a collection of $R$-injectives and $E = \bigoplus_{\lambda\in\Lambda} E_\lambda$. Let $I\noreq R$ be a non-zero proper ideal and $f: I\to E$ an $R$-linear map. Since $I$ is finitely generated, its image under $f$ is finitely generated in $E$. Consequently, there is a finite subset $\Lambda_0\subseteq\Lambda$ such that $f(I)\subseteq\bigoplus_{\lambda\in\Lambda_0} E_\lambda = E_0$. Being a finite direct sum of injectives, $E_0$ is injective and hence there is a map $F: R\to E_0$ extending $f: I\to E_0$. Composing $F$ with the natural inclusion $E_0\into E$, we obtain our desired extension of $f$. It now follows from \thref{thm:baer-criterion} that $E$ is an injective $R$-module.
\end{proof}

\begin{interlude}[Bass-Papp Construction]\thlabel{inter:bass-papp-construction}
    Let $R$ be a non-Noetherian ring. Choose a strictly increasing chain of proper non-zero ideals 
    \begin{equation*}
        0\ne I_1\subsetneq I_2\subsetneq\cdots.
    \end{equation*}
    For each $n\ge 1$, choose an injective module $E_n$ containing $R/I_n$, and set $E = \bigoplus_n E_n$. We contend that $E$ is not $R$-injective. 

    Let $I = \bigcup_n I_n$. Since each $I_n$ is proper, so is $I$. Let $f: I\to E$ be the map given by 
    \begin{equation*}
        f(x) = \left(x\mod I_1, x\mod I_2, \dots\right).
    \end{equation*}
    If $E$ were injective, then there must exist a map $F: R\to E$ extending $f$. Suppose $F(1) = (x_1, x_2, \dots)$. There is a positive integer $N$ such that $x_n = 0$ for all $n\ge N$. Choose $x\in I_{N + 1}\setminus I_N$. Since $x\in I$, we have 
    \begin{equation*}
        (xx_1, xx_2, \dots) = F(x) = f(x) = \left(x\mod I_1, x\mod I_2, \dots\right).
    \end{equation*}
    In particular, $x\mod I_N = xx_N = 0$, a contradiction. Thus $E$ is not $R$-injective.
\end{interlude}

\begin{proposition}\thlabel{prop:finite-injective-artinian}
    Let $(R,\frakm, k)$ be a Noetherian local ring. If $E\ne 0$ is an finitely generated injective $R$-module, then $R$ is Artinian.
\end{proposition}
\begin{proof}
    We shall show that $\dim R = 0$. Suppose not; we contend that there is a prime $\frakp\subsetneq\frakm$ such that $\Hom_{R}\left(R/\frakp, E\right)\ne 0$. Indeed, if there is a non-maximal prime $\frakp\in\Ass_R(E)$, then $R/\frakp\into E$, giving us the desideratum. On the other hand, if $\Ass_R(E) = \{\frakm\}$, then the composition 
    \begin{equation*}
        R/\frakp\onto R/\frakm\into E
    \end{equation*}
    gives a non-zero map $R/\frakp\to E$.

    Choose $a\in\frakm\setminus\frakp$; this is a non-zerodivisor on $R/\frakp$ and furnishes an exact sequence 
    \begin{equation*}
        0\to R/\frakp\xrightarrow{\cdot a} R/\frakp.
    \end{equation*}
    Applying $\Hom_{R}(-, E)$, we get a surjection 
    \begin{equation*}
        \Hom_{R}(R/\frakp, E)\xrightarrow{\cdot a} \Hom_R(R/\frakp, E)\to 0.
    \end{equation*}
    Note that $\Hom_R(R/\frakp, E)\cong (0:_E\frakp)\subseteq E$, is a finite $R$-module. Due to Nakayama's lemma, we must have that $\Hom_R(R/\frakp, E) = 0$, a contradiction. Thus $\dim R = 0$, i.e. $R$ is Artinian.
\end{proof}

\begin{remark}
    One cannot drop the local condition in \thref{prop:finite-injective-artinian}. This construction makes use of injective hulls. Let $k$ be an algebraically closed field and 
    \begin{equation*}
        R = \frac{k[X, Y]}{(X - X^2, Y - XY)}.
    \end{equation*}
    Note that $R$ is the coordinate ring of the disjoint union of the origin and the line $x = 1$ in $\bbA_k^2$. In particular, $\dim R = 1$, and $R$ is not Artinian.
    
    Let $\frakm = (x, y)$ be the maximal ideal corresponding to the origin. Then $R_{\frakm}\cong k$, since it is the local ring of an isolated point. Now, 
    \begin{equation*}
        E_R(k)\cong E_{R_\frakm}(k)\cong E_k(k) = k,
    \end{equation*}
    so that $k$ is a finitely generated injective $R$-module.
\end{remark}

\subsection{Essential Extensions and Injective Hulls}

% This section is very empty. Write about injective hulls and the decomposition theorem of Matlis (also ways to compute the multiplicity of each indecomposable factor).

\begin{definition}
    A containment of $R$-modules $N\subseteq M$ is said to be \define{essential} if every non-zero submodule of $M$ intersects $N$ non-trivially.

    An injective map $\iota: N\into M$ is said to be essential if $\iota(N)\subseteq M$ is essential.
\end{definition}

\begin{remark}\thlabel{rem:extension-of-injection}
    Let $M\subseteq N$ be an essential extension of $R$-modules and $\varphi: M\into P$ be an $R$-linear injective map. If $\varphi$ extends to an $R$-linear map $\wt\varphi: N\to P$, then $\wt\varphi$ is injective too. Indeed, if $K = \ker\wt\varphi\ne 0$, then $K\cap M\ne 0$, a contradiction.
\end{remark}

\begin{proposition}\thlabel{prop:essential-over-socle}
    Let $(R,\frakm, k)$ be a Noetherian local ring. Let $M$ be an Artinian $R$-module. Then $\Soc_R(M)\subseteq M$ is an essential extension.
\end{proposition}
\begin{proof}
    Let $0\ne K\subseteq M$ be a submodule. Choose $0\ne x\in K$. Since $M$ is Artinian, the descending chain $Rx\supseteq\frakm x\supseteq\frakm^2 x\supseteq\cdots$ stabilizes. Let $n\ge 0$ be the least positive integer such that $\frakm^n x = \frakm^{n + 1}x$. Due to Nakayama's lemma, $\frakm^n x = 0$, whence $n\ge 1$. It follows that $0\ne\frakm^{n  - 1}x\subseteq\Soc_R(M)\cap K$, as desired.
\end{proof}

\begin{corollary}\thlabel{cor:inj-hull-artinian}
    Let $(R,\frakm, k, E)$ be a Noetherian local ring and $M$ an Artinian $R$-module. If $\dim_k\Soc_R(M) = d$, then $E_R(M)\cong E^{\oplus d}$.
\end{corollary}
\begin{proof}
    Since $\Soc_R(M)\cong k^{\oplus d}$, it is clear that $E_R\left(\Soc_R(M)\right)\cong E^{\oplus d}$. The inclusion $\Soc_R(M)\into E^{\oplus d}$ can be extended to $M$ to obtain a commutative diagram:
    \begin{equation*}
        \xymatrix {
            M\ar@{^{(}->}[rd]\\
            \Soc_R(M)\ar@{^{(}->}[r]\ar@{^{(}->}[u] & E_R\left(\Soc_R(M)\right)\cong E^{\oplus d}
        }
    \end{equation*}
    where all maps are inclusion. It follows that $M\into E^{\oplus d}$ is an essential extension. Since $E^{\oplus d}$ is an injective module, we have that $E_R(M)\cong E^{\oplus d}$.
\end{proof}



\section{Matlis Duality}

\begin{definition}
    Let $(R,\frakm, k, E)$ be a Noetherian local ring. For an $R$-module $M$, set $M^\vee = \Hom_R(M, E)$. This is known as the \define{Matlis dual} of a module.
\end{definition}

Clearly $(-)^\vee$ is a contravariant exact functor on the category of $R$-modules. Note that if $I\subseteq\frakm$ is an ideal, then as we have seen earlier, 
\begin{equation*}
    E_{R/I}(k) = \Hom_R\left(R/I, E\right) = \left(R/I\right)^\vee.
\end{equation*}
In particular, taking $I = \frakm$, we see that $k^\vee \cong k$ as $R$-modules.

\begin{lemma}\thlabel{lem:properties-of-cech}
    Let $(R,\frakm,k, E)$ be a Noetherian local ring. Then 
    \begin{enumerate}[label=(\arabic*)]
        \item If $M\ne 0$, then $M^\vee\ne 0$. 
        \item If $\lambda_R(M) < \infty$, then $\lambda_R(M^\vee)\ne 0$. Moreover, $\lambda_R(M) = \lambda_R(M^\vee)$.
    \end{enumerate}
\end{lemma}
\begin{proof}
\begin{enumerate}[label=(\arabic*)]
    \item Let $0\ne x\in M$. If $I = \Ann_R(x)$, then there is a natural inclusion $R/I\into M$ sending $\overline 1\mapsto x$. Taking the Matlis dual, we have a surjection 
    \begin{equation*}
        M^\vee\onto \left(R/I\right)^\vee = E_{R/I}(k)\ne 0,
    \end{equation*}
    consequently $M^\vee\ne 0$.

    \item We shall prove both statements by induction on $\lambda_R(M)$. If $\lambda_R(M) = 0$, then $M = 0$, so that $M^\vee = 0$ and we get $\lambda_R(M) = 0 = \lambda_R(M^\vee)$. Suppose now that $0 < \lambda_R(M) < \infty$. Then $\frakm\in\Ass_R(M)$, and we have a short exact sequence 
    \begin{equation*}
        0\longrightarrow k \longrightarrow M\longrightarrow N\longrightarrow 0.
    \end{equation*}
    Since length is additive, $\lambda_R(N) = \lambda_R(M) - 1$; hence the induction hypothesis applies and $\lambda_R(N^\vee) = \lambda_R(N)$. Taking the Matlis dual of the above short exact sequence, we have
    \begin{equation*}
        0\longrightarrow N^\vee\longrightarrow M^\vee\longrightarrow k^\vee\longrightarrow 0.
    \end{equation*}
    Since $k^\vee = 0$, we see that 
    \begin{equation*}
        \lambda_R(M^\vee) = \lambda_R(N^\vee) + 1 = \lambda_R(N) + 1 = \lambda_R(M),
    \end{equation*}
    as desired. \qedhere
\end{enumerate}
\end{proof}

\begin{theorem}\thlabel{thm:properties-of-E-artinian}
    Let $(R,\frakm, k, E)$ be an Artinian local ring.
    \begin{enumerate}[label=(\arabic*)]
        \item $E$ is a faithful finite $R$-module.
        \item The map 
        \begin{equation*}
            \mu: R\longrightarrow \Hom_R(E, E)\qquad a\longmapsto\mu_a
        \end{equation*}
        is an isomorphism of $R$-modules and rings.
        \item Given a finite $R$-module $M$, the natural map 
        \begin{equation*}
            \varphi_M: M\longrightarrow M^{\vee\vee}\qquad m\longmapsto\ev_m
        \end{equation*}
        is an isomorphism.
    \end{enumerate}
\end{theorem}
\begin{proof}
\begin{enumerate}[label=(\arabic*)]
    \item Suppose $a\in R$ is such that $aE = 0$. Then 
    \begin{equation*}
        R^\vee = \Hom_R(R, E) = E = (E :_E a)\cong\Hom_R\left(R/aR, E\right) = \left(R/aR\right)^\vee.
    \end{equation*}
    Since $R$ is Artinian, we then have 
    \begin{equation*}
        \lambda_R(R) = \lambda_R(R^\vee) = \lambda_R\left((R/aR)^\vee\right) = \lambda_R(R/aR)\implies\lambda_R(aR) = 0, 
    \end{equation*}
    consequently, $a = 0$, i.e., $E$ is a faithful $R$-module.

    Next, since $R$ is Artinian, $\frakm\in\Ass_R(R)$, consequently, there is an injection $k = R/\frakm\into R$. Due to \thref{rem:extension-of-injection} extends to an inclusion $E\into R$, consequently, $E$ is a finite $R$-module.

    \item First note that $\mu$ is injective due to (1). But note that 
    \begin{equation*}
        \infty > \lambda_R(R) = \lambda_R(R^\vee) = \lambda_R(E) = \lambda_R(E^\vee) = \lambda_R\left(\Hom_R(E, E)\right),
    \end{equation*}
    consequently $\mu$ is an isomorphism.

    \item It suffices to show that $\varphi_M$ is injective since $\lambda_R(M) = \lambda_R(M^{\vee\vee})$. Suppose $0\ne x\in M$ is such that $\varphi_M(x) = 0$, that is, for all $f\in\Hom_R(M, E)$, $f(x) = 0$. Let $I = \Ann_R(x)$. Now, there is a non-zero map 
    \begin{equation*}
        \psi: R/I\onto R/\frakm = k\into E,
    \end{equation*}
    which extends to a non-zero map $f: M\to E$ since $R/I\into M$ through $\overline 1\mapsto x$. Thus, $f(x) = \psi(\overline 1)\ne 0$, a contradiction. \qedhere
\end{enumerate}
\end{proof}

\begin{porism}\thlabel{por:matlis-reflexivity-of-finite-length}
    Let $(R,\frakm,k)$ be a Noetherian local ring and $M$ a finite-length $R$-module. Then the ``evaluation map'' $\ev: M\to M^{\vee\vee}$ is an isomorphism of $R$-modules.
\end{porism}
\begin{proof}
    As in the preceding proof, $\ev$ is injective and due to \thref{lem:properties-of-cech}, $\lambda_R(M) = \lambda_R(M^{\vee\vee})$, whence $\ev$ is an isomorphism.
\end{proof}

\begin{interlude}[On $\wh R$-modules]\thlabel{inter:modules-over-completion}
    Let $(R,\frakm, k)$ be a local ring and $M$ an $R$-module such that $\Gamma_\frakm(M) = M$. We contend that $M$ is an $\wh R$-module in a natural way. To this end, we need only define $\wh a\cdot m$ for $\wh a\in\wh R$ and $m\in M$. 

    Let $\wh a = (a_1, a_2, \dots)$, where we are using the isomorphism
    \begin{equation*}
        \wh R = \varprojlim R/\frakm^n.
    \end{equation*}
    Since $\Gamma_\frakm(M) = M$, there is a positive integer $n\ge 1$ such that $\frakm^n m = 0$. Hence, for $k\ge n$, we have $a_k\cdot m = a_n\cdot m$, as $a_k - a_n\in\frakm^n$. In light of this, we define $\wh a\cdot m = a_n\cdot m$. We must show that this makes $M$ into an $\wh R$-module.

    Let $m_1, m_2\in M$ and $\wh a = (a_1, a_2, \dots)\in\wh R$. There are positive integers $n_1, n_2\ge 1$ such that $\frakm^{n_1}m_1 = 0 = \frakm^{n_2} m_2$; then $\frakm^n m_1 = 0 = \frakm^n m_2$ for all $n\ge\max\{n_1, n_2\}$. Hence, for all such $n\ge 1$, 
    \begin{equation*}
        \wh a\cdot(m_1 + m_2) = a_n\cdot (m_1 + m_2) =  a_n\cdot m_1 + a_n\cdot m_2 = \wh a\cdot m_1 + \wh a\cdot m_2.
    \end{equation*}
    Next, let $\wh a,\wh b\in\wh R$ and $m\in M$ with 
    \begin{equation*}
        \wh a = (a_1, a_2, \dots)\qquad\text{and}\qquad\wh b = (b_1, b_2, \dots).
    \end{equation*}
    There is a positive integer $n$ such that $\frakm^n m = 0$. Then 
    \begin{equation*}
        (\wh a + \wh b)\cdot m = (a_n + b_n)\cdot m = a_n\cdot m + b_n\cdot m = \wh a\cdot m + \wh b\cdot m.
    \end{equation*}
    Finally, note that $\wh b\cdot m = b_n m$ and $\frakm^n\left(\wh b\cdot m\right) = 0$, so that 
    \begin{equation*}
        \wh a\cdot\left(\wh b\cdot m\right) = \wh a\cdot\left(b_n\cdot m\right) = a_n\cdot\left(b_n\cdot m\right) = (a_nb_n)\cdot m =(\wh a\wh b)\cdot m.
    \end{equation*}
    This shows that $M$ is indeed an $\wh R$-module as described above. Further, since $R\to \wh R$ is the diagonal map, it follows that the $\wh R$-module structure on $M$ agrees with the $R$-module struture through the diagonal map. In particular, this means that:
    \begin{quotation}
        A subset of $M$ is an $R$-submodule if and only if it is an $\wh R$-submodule.
    \end{quotation}
    As a result, $M$ is Noetherian (resp. Artinian) as an $R$-module if and only if it is so as an $\wh R$-module.

\end{interlude}

\begin{interlude}[On maps between $\frakm$-power torsion modules]\thlabel{inter:maps-between-m-power-torsion-modules}
    Again, let $(R,\frakm, k)$ be a local ring and suppose $M$ and $N$ are $R$-modules such that $\Gamma_\frakm(M) = \Gamma_\frakm(N)$. By \thref{inter:modules-over-completion}, we know that they are $\wh R$-modules in a natural way. Let $\varphi: M\to N$ be an $R$-linear map. We contend that $\varphi$ is also $\wh R$-linear. Indeed, let $m\in M$ and $\wh a = (a_1, a_2, \dots)\in\wh R$. There is a positive integer $n\ge 1$ such that $\frakm^n m = 0$, and hence, $\frakm^n\varphi(m) = 0$. It follows that 
    \begin{equation*}
        \varphi(\wh a\cdot m) = \varphi(a_n\cdot m) = a_n\cdot\varphi(m) = \wh a\cdot\varphi(m),
    \end{equation*}
    as desired.
\end{interlude}

\begin{theorem}\thlabel{thm:properties-of-E-noetherian}
    Let $(R,\frakm, k, E)$ be a Noetherian local ring. 
    \begin{enumerate}[label=(\arabic*)]
        \item $\Gamma_{\frakm}(E) = E$, and hence $E$ is an $\wh R$ module and for every $R$-module $M$.
        \item $E\cong E_{\wh R}(k)$ as $\wh R$-modules.
        \item $R^{\vee\vee} = \Hom_R(E, E)\cong\wh R$ as $R$-algebras.
        \item $E$ is an Artinian $R$-module.
    \end{enumerate}
\end{theorem}
\begin{proof}
\begin{enumerate}[label=(\arabic*)]
    \item That $E$ is an $\wh R$-module follows immediately from \thref{inter:modules-over-completion}.

    \item The containment $k\subseteq E$ is an essential extension of $R$-modules, both of which are $\frakm$-power torsion. Due to \thref{inter:modules-over-completion}, it follows that it is an essential extension of $\wh R$-modules too. Now, due to \thref{rem:extension-of-injection}, there is a commutative diagram of inclusions 
    \begin{equation*}
        \xymatrix {
            E\ar[rd]\\
            k\ar[u]\ar[r] & E_{\wh R}(k),
        }
    \end{equation*}
    where all maps are $\wh R$-linear. It follows that $E\into E_{\wh R}(k)$ is an essential extension of $\wh R$-modules, and consequently, an essential extension of $R$-modules. Since $E$ is $R$-injective, we must have that the inclusion is an isomorphism of $R$-modules. Finally, due to \thref{inter:maps-between-m-power-torsion-modules}, this is an isomorphism of $\wh R$-modules.

    \item For every positive integer $n\ge 1$, set $E_n = \left(0 :_E \frakm^n\right)$. Note that $E_1\subseteq E_2\subseteq\cdots$, and $E = \bigcup_n E_n$. Define $\Phi: \wh R\to\End_R(E)$ as follows: for $\wh a = (a_1, a_2,\dots)\in\wh R$, let $\Phi(\wh a) = f\in\End_R(E)$ where $f$ is given by 
    \begin{equation*}
        f(x) = a_n x\quad\text{ if } x\in E_n.
    \end{equation*}
    First we must show that the above map is well-defined. Indeed, if $m < n$ and $x\in E_m\subseteq E_n$, then $a_m - a_n\in\frakm^m$, whence $(a_m - a_n) x = 0$, i.e., $a_m x = a_n x$. That the map $f$ is $R$-linear is clear from its definition. 

    That the map $\Phi$ is $R$-linear is also clear. We claim that $\Phi$ is a ring homomorphism. Let $\wh a = (a_1,a_2,\dots), \wh b = (b_1,b_2,\dots)\in\wh R$ and set $f = \Phi(\wh a)$, $g = \Phi(\wh b)$, and $h = \Phi(\wh a\wh b)$. If $x\in E_n$, then
    \begin{equation*}
        h(x) = (a_nb_n)x = f(g(x))\implies h = f\circ g,
    \end{equation*}
    thus $\Phi$ is a ring homomorphism.

    Finally, we show that $\Phi$ is bijective, so that it is an isomorphism of $R$-algebras. If $\wh a\in\wh R$ is such that $\Phi(\wh a) = 0$, then $a_n\in\Ann_R(E_n)$ for every positive integer $n$. But recall that 
    \begin{equation*}
        E_n\cong\Hom_{R}\left(R/\frakm^n, E\right)\cong E_{R/\frakm^n}(k),
    \end{equation*}
    which is a faithful $R/\frakm^n$-module due to \thref{thm:properties-of-E-artinian}. As a result, $\Ann_R(E_n) = \frakm^n$, i.e., $a_n\in\frakm^n$ for all $n\ge 1$; in other words, $\wh a = 0$. This proves the injectivity of $\Phi$. 

    Next, we must show surjectivity of $\Phi$. Let $f\in\End_R(E)$, then $f$ restricts to an $R$-linear endomorphism of $E_n\cong E_{R/\frakm^n}(k)$. Due to \thref{thm:properties-of-E-artinian}, the restriction of $f$ to each $E_n$ is multiplication by some element $a_n\in R/\frakm^n$. Further, it is clear that under the canonical surjection $R/\frakm^n\onto R/\frakm^{n - 1}$, $a_n$ maps to $a_{n - 1}$, so that $\wh a = (a_1,a_2,\dots)\in\wh R$ and $\Phi(\wh a) = f$. Thus $\Phi$ is surjective, as desired.

    As a final subtle point, we must check that the $R$-algebra structure on $\wh R$ is the canonical one. The natural map $R\to\End_R(E)$ is $a\mapsto\mu_a$, the ``multiplication by $a$'' map. From our definition of $\Phi$, it is clear that $\Phi^{-1}(\mu_a) = (a, a, \dots)$, which is precisely the image of $a$ under the canonical map $R\to\wh R$.

    \item Let $M_1\supseteq M_2\supseteq\cdots$ be a chain of $R$-submodules in $E$. There are commutative diagrams 
    \begin{equation*}
        \xymatrix {
            M_{j + 1}\ar@{^{(}->}[r]^-{\iota_{j + 1}}\ar@{^{(}->}[d] & E\\
            M_j\ar@{^{(}->}[ru]_-{\iota_j}
        }
    \end{equation*}
    whose Matlis dual furnishes commutative diagrams 
    \begin{equation*}
        \xymatrix {
            \wh R = E^\vee\ar@{->>}[r]^-{\varphi_j}\ar@{->>}[rd]_-{\varphi_{j + 1}} & M_{j}^\vee\ar@{->>}[d] \\
            & M_{j + 1}^\vee
        }.
    \end{equation*}
    Note that all Matlis duals are $\frakm$-power torsions and hence due to \thref{inter:maps-between-m-power-torsion-modules}, the $\varphi_j$'s are $\wh R$-linear. Let $I_j = \ker\varphi_j\subseteq\wh R$, which is an ideal. Due to the commutative diagram, it is clear that there is an ascending chain $I_j\subseteq I_{j + 1}$. Since $\wh R$ is Noetherian, this chain stabilizes, say $I_n = I_{n + 1} = \dots$. 
    
    Then due to the first isomorphism theorem, $M_j^\vee\onto M_{j + 1}^\vee$ is an isomorphism for all $j\ge n$. Let $C_j = \coker\left(M_{j + 1}\into M_j\right)$. The exactness of the Matlis dual gives $C_j^\vee = 0$, which, due to \thref{lem:properties-of-cech}, implies that $C_j = 0$, that is, $M_{j + 1}\into M_j$ is an isomorphism for all $j\ge n$, i.e., the descending chain stabilizes, as desired. \qedhere
\end{enumerate}
\end{proof}

\begin{interlude}[The Matlis Dual is a module over $\wh R$]\thlabel{inter:matlis-dual-module-over-completion}
    Let $(R,\frakm, k, E)$ be a Noetherian local ring and $M$ an $R$-module. The Matlis dual $M^\vee = \Hom_R(M, E)$ is naturally a $\wh R = \End_R(E)$-module: for $f\in M^\vee$ and $\varphi\in\End_R(E)$, define $\varphi\cdot f = \varphi\circ f$. It is easy to check that this $\wh R$-module structure on $M^\vee$ extends the $R$-module structure through the canonical map $R\to\End_R(E)$, $a\mapsto\mu_a$.

    Now, if $f: M\to N$ is an $R$-linear map of $R$-modules, then $f^\vee: N^\vee\to M^\vee$ is $\wh R$-linear. Indeed, for $\varphi\in N^\vee$, and $\psi\in\wh R = \End_R(E)$, we have 
    \begin{equation*}
        f^\vee\left(\psi\cdot\varphi\right) = f^\vee\left(\psi\circ\varphi\right) = \psi\circ\varphi\circ f = \psi\cdot f^\vee\left(\varphi\right),
    \end{equation*}
    as desired.
\end{interlude}

\begin{theorem}[Matlis Duality, version 1]\thlabel{thm:matlis-duality-version-1}
    Let $(R,\frakm,k,E)$ be a Noetherian local ring. Then there is a bijective correspondence 
    \begin{equation*}
        \left\{
        \begin{tabular}{@{} c @{}}
            isomorphism classes of\\
            finitely generated\\ 
            $\wh R$-modules
        \end{tabular}
        \right\}
        \;
        \begin{gathered}
            \overset{(-)^\vee}{\longrightarrow}\\[-2ex]
            \underset{(-)^\vee}{\longleftarrow}
        \end{gathered}
        \;
        \left\{
        \begin{tabular}{@{} c @{}}
            isomorphism classes of\\
            Artinian $R$-modules
        \end{tabular}
        \right\}.
    \end{equation*}
\end{theorem}
\begin{proof} % TODO: There is something wrong here. Figure it out!!!
    Let $M$ be an Artinian $R$-module and let $d = \dim_k\Soc_R(M)$. Due to \thref{cor:inj-hull-artinian}, $E_R(M)\cong E^{\oplus d}$, so that there is an inclusion $M\into E^{\oplus d}$, which upon taking the Matlis dual furnishes an $\wh R$-linear surjection $\wh R^{\oplus d}\onto M^{\vee}$. Thus $M^{\vee}$ is a finite $\wh R$-module. 

    Conversely, suppose $M$ is a finite $\wh R$-module. Thus, there is a surjection $\wh R^{\oplus n}\onto M$. Taking the Matlis dual, we obtain an injection $M^\vee\into\left(\wh R^\vee\right)^{\oplus n}$.
    
    There is a natural ``evaluation map'' $\ev: M\to M^{\vee\vee}$, which we shall show is an isomorphism. That $\ev$ is injective follows in the same way as \thref{thm:properties-of-E-artinian} (3). Next, since $\lambda_R(M) < \infty$, we have that $\lambda_R(M) = \lambda_R(M^\vee) = \lambda_R(M^{\vee\vee})$, whence $\ev$ is an isomorphism.
\end{proof}

\begin{theorem}\thlabel{thm:equivalent-self-injective}
    Let $(R,\frakm, k, E)$ be a Noetherian local ring. Then the following are equivalent: 
    \begin{enumerate}[label=(\arabic*)]
        \item $R$ is self-injective
        \item $R\cong E$ as $R$-modules. 
        \item $R$ is Artinian and $\dim_k\Soc_R(R) = 1$.
    \end{enumerate}
\end{theorem}
\begin{proof}
$(1)\implies(2)$ Due to \thref{prop:finite-injective-artinian}, $R$ must be an Artinian local ring, and hence, from \thref{prop:essential-over-socle}, $\Soc_R(R)\subseteq R$ is an essential extension. It follows that $R$ is the injective hull of $\Soc_R(R)\cong k^{\oplus d}$ for some positive integer $d$. Hence, $R\cong E^{\oplus d}$ as $R$-modules, and comparing lengths, we have 
\begin{equation*}
    \lambda_R(R) = d\lambda_R(E) = d\lambda_R(R^\vee) = d\lambda_R(R),
\end{equation*}
whence $d = 1$ and $R\cong E$. 

$(2)\implies(3)$ Due to \thref{thm:properties-of-E-noetherian} (4), $R$ is Artinian. Using a length argument as above, we can show that $\dim_k\Soc_R(R) = 1$. 

$(3)\implies(1)$ Again, since $k = \Soc_R(R)\subseteq R$ is essential, we have that $R\into E = E_R(k)$. Using a length argument, it follows that this inclusion must be an isomorphism, whence $R$ is self-injective.
\end{proof}


\begin{theorem}[Matlis Duality, version 2]\thlabel{thm:matlis-duality-version-2}
    Let $(R,\frakm,k)$ be a Noetherian local ring. Then there is a bijective correspondence
    \begin{equation*}
        \left\{
        \begin{tabular}{@{} c @{}}
            $\frakm$-primary ideals\\
            in $R$ 
        \end{tabular}
        \right\}
        \;
        \begin{gathered}
            \overset{\left(0 :_E -\right)}{\longrightarrow}\\[-2ex]
            \underset{\left(0 :_R -\right)}{\longleftarrow}
        \end{gathered}
        \;
        \left\{
        \begin{tabular}{@{} c @{}}
            finitely generated\\
            $R$-submodules of $E$
        \end{tabular}
        \right\}.
    \end{equation*}
\end{theorem}
\begin{proof}
    We must first show that the above maps are indeed defined between those sets. Let $I$ be $\frakm$-primary in $R$. Then 
    \begin{equation*}
        \left(0 :_E I\right)\cong\Hom_R\left(R/I, E\right) = \left(R/I\right)^\vee.
    \end{equation*}
    As a result, $\lambda_R\left(\left(0 :_E I\right)\right) = \lambda_R(R/I) < \infty$, so that $(0:_E I)$ is a finite $R$-module. 

    On the other hand, let $W\subseteq E$ be a finite $R$-submodule. Taking the Matlis dual of the exact sequence $0\to W\to E$, one obtains an $\wh R$-linear (due to \thref{inter:matlis-dual-module-over-completion}) surjection $\varphi: \wh R\onto W^\vee$. Further, since $\lambda_R(W) < \infty$, we have $\lambda_R(W^\vee) = \lambda_R(W) < \infty$. Set $I = (0:_R W)$ and $J = (0 :_R W^\vee)$; note that both $I$ and $J$ are $\frakm$-primary. This shows that both the maps maps in the theorem are well-defined.
    \begin{claim}
        $I = J$
    \end{claim}
    \noindent Since $I$ annihilates $W$, it must also annihilate $W^\vee$, so that $I\subseteq J$. Now, since $J$ annihilates $W^\vee$, it annihilates $W^{\vee\vee}\cong W$ (due to \thref{por:matlis-reflexivity-of-finite-length}), so that $J\subseteq I$; as a result, $I = J$. $\spadesuit$

    Finally, we show that the given maps are inverses to one another. Let $I\noreq R$ be $\frakm$-primary. Then $(0 :_E I)\cong\Hom_R(R/I, E)\cong E_{R/I}(k)$, whence due to \thref{thm:properties-of-E-artinian} (1), $\left(0:_R\left(0:_E I\right)\right) = I$. Next, let $W\subseteq E$ be a finite $R$-submodule. Clearly $W\subseteq (0:_E (0:_R W))$. Further, recall that $\wh R\onto W^\vee$ and $\lambda_{\wh R}(W^\vee) = \lambda_R(W) < \infty$\footnote{Since every $\wh R$-submodule of $W^\vee$ is also an $R$-submodule, it follows that $W^\vee$ is both Noetherian and Artinian as an $\wh R$-module.}, the kernel of the surjection is $\wh\frakm$-primary, and hence, factors through $\wh R/\wh\frakm^n$ for some positive integer $n$. But since $\wh R/\wh\frakm^n\cong R/\frakm^n$ as $R$-modules, it follows that $W^\vee$ is a cyclic $R$-module. In particular, $W^\vee\cong R/J = R/I$. In particular, 
    \begin{equation*}
        \lambda_R\left(\left(0 :_E\left(0:_R W\right)\right)\right) = \lambda_R\left((R/I)^\vee\right) = \lambda_R(R/I) = \lambda_R(R/J) = \lambda_R(W^\vee) = \lambda_R(W),
    \end{equation*}
    whence $W = \left(0:_E\left(0:_R W\right)\right)$, thereby completing the proof.
\end{proof}

\section{Injective Resolutions}

\subsection{Bass's Lemma and ramifications}

\begin{definition}
    Let $M$ be an $R$-module. An \define{injective resolution} for $M$ is an exact complex 
    \begin{equation*}
        0\to M\to E^0\to E^1\to E^2\to\cdots,
    \end{equation*}
    where each $E^n$ is an injective $R$-module. The resolution is often denoted succinctly as $0\to M\to E^\bullet$.

    We say that $M$ has finite injective dimension if $M$ has an injective resolution $0\to M\to E^\bullet$ and an integer $N\ge 0$ such that $E^n = 0$ for $n\ge N$. We define 
    \begin{equation*}
        \injdim_R M = \inf\left\{n\colon 0\to M\to E^0\to\cdots\to E^n\to 0\text{ is an injective resolution of } M\right\}.
    \end{equation*}
    If $M$ does not have finite injective dimension, then set $\injdim_R M = \infty$.
\end{definition}

\begin{remark}\thlabel{rem:minimal-injective-resolution}
    It is possible to create a ``canonical'' injective resolution by successively taking injective hulls. Set $E^0 = E_R(M)$ and for $i\ge 0$, define 
    \begin{equation*}
        E^{i + 1} = E_R\left(\coker\left(E^{i - 1}\to E^i\right)\right),
    \end{equation*}
    with the convention that $E^{-1} = M$. We call this the \define{minimal injective resolution} of $M$.
\end{remark}

\begin{lemma}\thlabel{lem:condition-to-be-injective-hull}
    Let $R$ be a Noetherian ring and $0\to M\xrightarrow{\theta} E$ be an inclusion of $R$-modules with $E$ injective. Then the inclusion is an injective hull of $M$ if and only if 
    \begin{equation*}
        \Hom_R\left(R/\frakp, M\right)_\frakp\xrightarrow{\theta_\frakp}\Hom_R\left(R/\frakp, E\right)_\frakp
    \end{equation*}
    is an isomorphism for all $\frakp\in\Spec(R)$.
\end{lemma}
\begin{proof}
    Owing to the left exactness of $\Hom_R(R/\frakp, -)$ and the exactness of localization, the map $\theta_\frakp$ is injective for each $\frakp\in\Spec(R)$. Hence, it suffices to show that $E$ is injective if and only if $\theta_\frakp$ is surjective for each $\frakp\in\Spec (R)$. 

    Recall that there are canonical isomorphisms 
    \begin{equation*}
        \Hom_R(R/\frakp, M)_\frakp\xrightarrow{\sim}\Hom_{R_\frakp}(\kappa(\frakp), M_\frakp)\qquad\frac{\psi}{s}\longmapsto\left(\frac{a}{t}\mapsto \frac{\psi(a)}{st}\right),
    \end{equation*}
    where we are identifying $\kappa(\frakp)$ with the quotient field of $R/\frakp$. Hence, surjectivity of $\theta_\frakp$ is equivalent to the surjectivity of 
    \begin{equation*}
        \Hom_{R_\frakp}(\kappa(\frakp), M_\frakp)\to\Hom_{R_\frakp}(\kappa(\frakp), E_\frakp).
    \end{equation*}
    Henceforth, we shall identify $M$ with a submodule of $E$, so that $\theta$ is simply the inclusion map.

    Suppose first that $M\xrightarrow{\theta} E$ is an injective hull and let $0\ne\varphi\in\Hom_{R_\frakp}(\kappa(\frakp), E_\frakp)$. Using the above isomorphism, we can write $\varphi = \psi/s$ for some $\psi\in\Hom_R(R/\frakp, E)$ and $s\in R\setminus\frakp$. Let $\psi(\overline 1) = z\in E$ and $a\in R$ such that $0\ne az\in M$. Note that $a\in R\setminus\frakp$, since $\frakp\subseteq\Ann_R(z)$\footnote{Note that $\frakp = \Ann_R(z)$, for if not, then $\varphi = 0$.}. Define
    \begin{equation*}
        \overline\varphi: R/\frakp\longrightarrow M\qquad \overline 1\longmapsto az.
    \end{equation*}
    This is well-defined, since $\frakp$ annihilates $az\in M$. We claim that 
    \begin{equation*}
        \varphi = \frac{\overline\varphi}{as}\in\Hom_{R_\frakp}\left(\kappa(\frakp), E_\frakp\right).
    \end{equation*}
    Indeed, for $x/t\in\kappa(\frakp)$ we have 
    \begin{equation*}
        \left(\frac{\overline\varphi}{as}\right)\left(\frac{x}{t}\right) = \frac{\overline\varphi(x)}{ast} = \frac{xaz}{ast} = \frac{xz}{st} = \left(\frac{\psi}{s}\right)\left(\frac{x}{t}\right) = \varphi\left(\frac{x}{t}\right),
    \end{equation*}
    as desired. This shows that $\Hom_{R_\frakp}(\kappa(\frakp), M_\frakp)\to\Hom_{R_\frakp}(\kappa(\frakp), E_\frakp)$ is surjective. 

    Conversely, suppose the aforementioned map is surjective. We shall show that $E$ is the injective hull of $M$. To this end, it suffices to show that the inclusion $M\subseteq E$ is essential. Let $0\ne N\subseteq E$ be a submodule and $\frakp\in\Ass_R(N)$. There is an injective map 
    \begin{equation*}
        0\to R/\frakp\longrightarrow N\qquad \overline 1\longmapsto z.
    \end{equation*}
    Since $\frakp = \Ann_R(z)$, it suffices to find $a\in R\setminus\frakp$ such that $az\in M$. Consider the map 
    \begin{equation*}
        \varphi: \kappa(\frakp)\longrightarrow E_\frakp\qquad \overline 1\longmapsto z/1.
    \end{equation*}
    The surjectivity of $\theta_\frakp$ furnishes a $\psi: \kappa(\frakp)\to M_\frakp$ such that $\theta_\frakp(\psi) = \varphi$. In particular, this means that 
    \begin{equation*}
        \frac{z}{1} = \varphi(\overline 1) = \psi(\overline 1)\in M_\frakp,
    \end{equation*}
    whence there is some $a\in R\setminus\frakp$ such that $az\in M$, as desired.
\end{proof}

\begin{corollary}
    Let $R$ be a Noetherian ring and $0\to M\to E^\bullet$ be an injective resolution of an $R$-module $M$. Then $E^\bullet$ is minimal if and only if the natural maps 
    \begin{equation*}
        \Hom_{R_\frakp}\left(\kappa(\frakp), E^n_\frakp\right)\longrightarrow\Hom_{R_\frakp}\left(\kappa(\frakp), E^{n + 1}_\frakp\right)
    \end{equation*}
    are identically zero for all $n\ge 0$ and for all $\frakp\in\Spec(R)$.
\end{corollary}
\begin{proof}
    Let $K^n = \ker\left(E^n\to E^{n + 1}\right)$. Then there is an exact sequence $0\to K^n\to E^n\to E^{n + 1}$. Using \thref{lem:condition-to-be-injective-hull}, $E^n$ is the injective hull of $C^n$ if and only if 
    \begin{equation*}
        \Phi: \Hom_{R_\frakp}\left(\kappa(\frakp), C^n_\frakp\right)\to \Hom_{R_\frakp}\left(\kappa(\frakp), E^{n}_\frakp\right)\text{ is an isomorphism}.
    \end{equation*}
    But the left-exactness of $\Hom$ and exactness of localization implies that the sequence 
    \begin{equation*}
        0\to\Hom_{R_\frakp}\left(\kappa(\frakp), C^n_\frakp\right)\to\Hom_{R_\frakp}\left(\kappa(\frakp), E^{n}_\frakp\right)\to\Hom_{R_\frakp}\left(\kappa(\frakp), E^{n + 1}_\frakp\right)
    \end{equation*}
    is exact. Thus $\Phi$ is an isomorphism if and only if the map $\Hom_{R_\frakp}\left(\kappa(\frakp), E^{n}_\frakp\right)\to\Hom_{R_\frakp}\left(\kappa(\frakp), E^{n + 1}_\frakp\right)$ is the zero map, as desired.
\end{proof}

\begin{corollary}\thlabel{cor:bass-numbers-dim-ext}
    Let $R$ be a Noetherian ring and $M$ an $R$-module. Let $0\to M\to E^\bullet$ be \emph{the} minimal injective resolution of $M$. Then 
    \begin{equation*}
        E^j = \bigoplus_{\frakp}E_R\left(R/\frakp\right)^{a_j(\frakp)}\quad\text{ and }\quad a_j(\frakp) = \dim_{\kappa(\frakp)} \Ext^j_{R_\frakp}\left(\kappa(\frakp), M_\frakp\right).
    \end{equation*}
    In particular, if $M$ is a finite $R$-module, $a_j(\frakp) < \infty$ for all $j\ge 0$ and $\frakp\in\Spec(R)$.
\end{corollary}
\begin{proof}
    % TODO: Add in later
\end{proof}

\begin{definition}
    Let $R$ be a Noetherian ring and $M$ a finite $R$-module. For $j\ge 0$ and $\frakp\in\Spec(R)$, define the \define{$j$-th Bass number} as 
    \begin{equation*}
        \mu_j\left(\frakp, M\right) = \dim_{\kappa(\frakp)}\Ext_{R_\frakp}^j\left(\kappa(\frakp), M_\frakp\right).
    \end{equation*}
\end{definition}

\begin{remark}\thlabel{rem:justification-minimal-injective-resolution}
    We can now justify the name ``minimal injective resolution''. In particular, we shall show that the length of the minimal injective resolution is precisely the injective dimension of a module. 
    
    Let $R$ be a Noetherian ring and $M$ a finite $R$-module. Let $0\to M\to E^\bullet$ be \emph{the} minimal injective resolution in the sense of \thref{rem:minimal-injective-resolution}. Let $0\le\ell\le\infty$ denote the length of the resolution. Clearly $\injdim_R M\le\ell$. If $\injdim_R M = \infty$, then $\ell\le\injdim_R M$ so that $\ell = \injdim_R M$. 

    On the other hand, if $\injdim_R M = n < \infty$, then using this injective resolution to compute the $\Ext$'s, we see that for $j > n$, and $\frakp\in\Spec(R)$, 
    \begin{equation*}
        \Ext^{j}_R(R/\frakp, M) = 0\implies\mu_j(\frakp, M) = \dim_{\kappa(\frakp)}\Ext^{j}_{R_\frakp}\left(\kappa(\frakp), M_\frakp\right) = 0.
    \end{equation*}
    That is, $E^j = 0$ for all $j > n$ and hence, $\ell\le n$. It follows that $\ell = \injdim_R M$.
\end{remark}

\begin{lemma}[Bass]\thlabel{lem:bass}
    Let $R$ be a Noetherian ring and $M$ a finite $R$-module. Let $\frakp\subsetneq\frakq$ be primes in $R$ such that $\hght(\frakq/\frakp) = 1$. If for some $j\ge 0$, $\mu_j(\frakp, M)\ne 0$, then $\mu_{j + 1}(\frakq, M)\ne 0$.
\end{lemma}
\begin{proof}
    Localizing at $\frakq$, we may assume that $(R,\frakm, k)$ is a Noetherian local ring and $\hght(\frakm/\frakp) = 1$. If $a\in\frakm\setminus\frakp$, then $\sqrt{\frakp + (a)} = \frakm$, and we have a short exact sequence 
    \begin{equation*}
        0\to R/\frakp\xrightarrow{\cdot a} R/\frakp\to R/(\frakp + (a)) \to 0.
    \end{equation*}
    This gives rise to a long exact sequence 
    \begin{equation*}
        \cdots\to \Ext^j_R(R/\frakp, M)\xrightarrow{\cdot a}\Ext^j_R(R/\frakp, M)\to\Ext^{j + 1}_R(R/(\frakp + (a)), M)\to\cdots,
    \end{equation*}
    for all $j\ge 0$.
    \begin{equation*}
        \mu_j(\frakp, M)\ne 0\implies\Ext^j_{R_\frakp}\left(\kappa(\frakp), M_\frakp\right)\ne 0\implies \Ext^j_R(R/\frakp, M)\ne 0.
    \end{equation*}
    Since the $\Ext$'s are finite $R$-modules, Nakayama's lemma implies that $\Ext^{j + 1}_R(R/(\frakp + (a)), M)\ne 0$. 
    
    Since $\sqrt{\frakp + (a)} = \frakm$, the $R$-module $R/(\frakp + (a))$ is finite Artinian, so that it has a composition series with successive quotients isomorphic to $R/\frakm = k$. Now, if $\Ext^{j + 1}_R(k, M)\ne 0$, then through the short exact sequences induced by the composition series, it would follow that $\Ext^{j + 1}_R(R/(\frakp + (a)), M) = 0$, a contradiction. But since $R\setminus\frakm$ consists of only units, we have that 
    \begin{equation*}
        0\ne\Ext^{j + 1}_R(k, M) = \Ext^{j + 1}_{R_\frakm}(\kappa(\frakm), M_\frakm),
    \end{equation*}
    and hence $\mu_{j + 1}(\frakm, M)\ne 0$.
\end{proof}

\begin{remark}\thlabel{rem:ramifications-bass-lemma}
    Let $R$ be a Noetherian ring and $M$ a finite $R$-module. 
    \begin{enumerate}[label=(\roman*)]
        \item If $\mu_i(\frakp, M)\ne 0$, then for all primes $\frakq\supseteq\frakp$ with $\hght(\frakq/\frakp) = h < \infty$, $\mu_{i + h}(\frakq, M)\ne 0$.
        \item Since $\mu_0(\frakp, M)\ne 0$ if and only if $\frakp\in\Ass_R(M)$, using (i) and \thref{rem:justification-minimal-injective-resolution}, we conclude that 
        \begin{equation*}
            \injdim_R M\ge\sup\left\{\dim R/\frakp\colon\frakp\in\Ass_R(M)\right\} = \dim M.
        \end{equation*}
        \item If $(R,\frakm, k, E)$ is a Noetherian local ring with $0\to M\to E^\bullet$ as \emph{the} minimal injective resolution. If $E^n\ne 0$ and $E^j = 0$ for all $j > n$, then we must have that 
        \begin{equation*}
            \mu_n(\frakp, M)\ne 0 \iff \frakp = \frakm.
        \end{equation*}
        In particular, $E^n = E^{\mu_j(\frakm, M)}$.
    \end{enumerate}
\end{remark}

\begin{corollary}\thlabel{cor:infinite-inj-dim}
    Let $(R, \frakm, k)$ be a Noetherian local ring and $M$ a finite $R$-module. Then 
    \begin{equation*}
        \injdim_R M = \infty \iff \mu_j(\frakm, M)\ne 0 \text{ for infinitely many }j\ge 0.
    \end{equation*}
\end{corollary}
\begin{proof}
    Let $0\to M\to E^\bullet$ denote \emph{the} minimal injective resolution. Since $\mu_j(\frakm, M) = \dim_k\Ext^j_R(k, M)$, it is clear that if the supremum on the right hand side is infinite, then so is the length of the minimal injective resolution, which is the injective dimension of $M$.

    Conversely, if $\injdim_R M = \infty$, then $E^j\ne 0$ for infinitely many $j\ge 0$. We claim that for every integer $N\ge 0$, there is a $j\ge N$ with $\mu_j(\frakm, M)\ne 0$. Indeed, there is an index $i\ge N$ with $E^i\ne 0$. Choose $\frakp\in\Spec(R)$ with $\mu_i(\frakp, M)\ne 0$. Using \thref{lem:bass}, setting $j = i + \hght(\frakm/\frakp)$, we must have that $\mu_j(\frakm, M)\ne 0$, as desired.
\end{proof}

\begin{theorem}\thlabel{thm:ext-characterization-inj-dim}
    Let $(R,\frakm, k)$ be a Noetherian local ring and $M$ a finite $R$-module. Then 
    \begin{equation*}
        \injdim_R M = \sup\left\{j\colon \Ext^j_R(k, M)\ne 0\right\}.
    \end{equation*}
\end{theorem}
\begin{proof}
    If $\injdim_R M = \infty$, then due to \thref{cor:infinite-inj-dim}, $\Ext^j_R(k, M)\ne 0$ for infinitely may $j\ge 0$, so that the supremum on the right hand side is infinite.

    Suppose now wthat $\injdim_R M = n < \infty$. Clearly, $\Ext^j_R(k, M) = 0$ for $j > n$ and hence, 
    \begin{equation*}
        \sup\left\{j\colon \Ext^j_R(k, M)\right\}\le n = \injdim_R M.
    \end{equation*}
    Let $0\to M\to E^\bullet$ denote \emph{the} minimal injective resolution. Due to \thref{rem:ramifications-bass-lemma} (ii), we know that $\Ext^n_R(k, M)\ne 0$, and hence, 
    \begin{equation*}
        \sup\left\{j\colon\Ext^j_R(k, M)\right\} = n = \injdim_R M,
    \end{equation*}
    as desired.
\end{proof}

\begin{corollary}
    Let $(R,\frakm, k)$ be a regular local ring. If $M$ is a finite $R$-module, then $\injdim_R M < \infty$.
\end{corollary}
\begin{proof}
    Since $R$ is regular local, $\projdim_R k < \infty$ and hence for any finite $R$-module $M$, $\Ext^j_R(k, M) = 0$ for $j\gg 0$. It follows from \thref{thm:ext-characterization-inj-dim} that $\injdim_R M < \infty$.
\end{proof}

\begin{corollary}
    Let $(R,\frakm, k)$ be a Noetherian local ring. Then $\injdim_R k < \infty$ if and only if $R$ is a regular local ring.
\end{corollary}
\begin{proof}
    If $\injdim_R k < \infty$, then $\Ext^j_R(k, k) = 0$  for $j\gg 0$. Hence, the Betti numbers $\beta_j(k) = \dim_k\Ext^j_R(k, k) = 0$ for $j\gg 0$, whence $\projdim_R k < \infty$, that is, $R$ is a regular local ring.

    Conversely, if $R$ is a regular local ring, then $\projdim_R k < \infty$, so that $\Ext^j_R(k, k) = 0$ for $j\gg 0$, consequently, $\injdim_R k < \infty$.
\end{proof}

\subsection{Modules of finite injective dimension}

\begin{definition}
    A Noetherian local ring $(R,\frakm, k)$ is said to be a \define{Gorenstein local ring} if $\injdim_R R < \infty$.
\end{definition}

\begin{proposition}\thlabel{prop:localization-gorenstein-local}
    If $(R,\frakm, k)$ is a Gorenstein local ring and $\frakp\in\Spec(R)$, then $R_\frakp$ is a Gorenstein local ring.
\end{proposition}
\begin{proof}
    Since $\injdim_R R < \infty$, the minimal injective resolution of $R$ is finite, say of length $n$: 
    \begin{equation*}
        0\to R\to E^0\to\cdots\to E^n\to 0.
    \end{equation*}
    Localizing at $\frakp$, one obtains a finite injective resolution of $R_\frakp$ as an $R_\frakp$-module. Thus $R_\frakp$ is a Gorenstein local ring.
\end{proof}

This allows us to make the following 
\begin{definition}
    A Noetherian ring $R$ is said to be \define{Gorenstein} if $R_\frakp$ is a Gorenstein local ring for all $\frakp\in\Spec(R)$.
\end{definition}
Due to \thref{prop:localization-gorenstein-local}, every Gorenstein local ring is a Gorenstein ring.

\begin{proposition}
    A regular ring is Gorenstein.
\end{proposition}
\begin{proof}
    It suffices to show this in the local case. Let $(R,\frakm, k)$ be a regular local ring. Then $\gldim R = \projdim_R k < \infty$. This means that $\Ext^j_R(k, M) = 0$ for $j\gg 0$; which due to \thref{thm:ext-characterization-inj-dim} implies $\injdim_R M < \infty$ for each finite $R$-module $M$. In particular, $\injdim_R R < \infty$, whence $R$ is a Gorenstein local ring, as desired.
\end{proof}

\begin{remark}
    Note that if $R$ is a Noetherian ring such that $\injdim_R R < \infty$, then 
    \begin{equation*}
        \injdim_{R_\frakp} R_\frakp\le\injdim_R R < \infty,
    \end{equation*}
    so that $R$ is a Gorenstein ring. \textcolor{red}{What about the converse?}
\end{remark}

\begin{theorem}[Ischebeck's Formula]\thlabel{thm:ischebeck-formula}
    Let $(R,\frakm, k)$ be a Noetherian local ring and $M$, $N$ be finite $R$-modules. If $\injdim_R N < \infty$, then 
    \begin{equation*}
        \injdim_R N = \depth M + \sup\left\{i\colon\Ext^i_R(M, N)\ne 0\right\}.
    \end{equation*}
\end{theorem}
\begin{proof}
    Due to \thref{thm:ext-characterization-inj-dim}, we know that Ischebeck's formula is true for $M = k$. Next, we prove this by induction on $\depth M$.

    Suppose first that $\depth M = 0$. Then $\frakm\in\Ass_R(M)$, and hence there is a short exact sequence
    \begin{equation*}
        0\longrightarrow k\longrightarrow M\longrightarrow C\longrightarrow 0.
    \end{equation*}
    Let $t = \injdim_R N$ and consider the long exact sequence induced:
    \begin{equation*}
        \cdots\to\Ext^t_R(C, N)\to\Ext^t_R(M, N)\to\Ext^t_R(k, N)\to \Ext^{t + 1}_R(C, N) = 0.
    \end{equation*}
    Due to \thref{thm:ext-characterization-inj-dim}, $\Ext^t_R(k, N)\ne 0$, and hence $\Ext^t_R(M, N)\ne 0$ since it surjects onto the former. It follows that $\sup\left\{i\colon\Ext^i_R(M, N)\ne 0\right\} = t = \injdim_R N$. This shows that Ischebeck's formula holds when $\depth M = 0$. 

    Suppose now that $\depth M > 0$. Let $a\in\frakm$ be a non-zerodivisor on $M$; this gives a short exact sequence 
    \begin{equation*}
        0\to M\xrightarrow{\cdot a} M\to\overline M\to 0,
    \end{equation*}
    where $\overline M = M/aM$. Set $t = \injdim_R N$ and $d = \depth M > 0$. Then $\depth\overline M = d - 1$. The induction hypothesis gives 
    \begin{equation*}
        \sup\left\{i\colon\Ext^i_R(\overline M, N)\ne 0\right\} = t - d + 1.
    \end{equation*}
    The short exact sequence above gives a long exact sequence
    \begin{equation*}
        \cdots\to\Ext^i_R(M, N)\xrightarrow{\cdot a}\Ext^i_R(M, N)\to\Ext^{i + 1}_R(\overline M, N)\to\Ext^{i + 1}_R(M, N)\to\cdots.
    \end{equation*}
    If $i > t - d$, then $\Ext^{i + 1}_R(\overline M, N) = 0$, and due to Nakayama's lemma, $\Ext^i_R(M, N) = 0$. On the other hand, for $i = t -d$, $\Ext^{i + 1}_R(\overline M, N)\ne 0$ but $\Ext^{i + 1}_R(M, N) = 0$. Thus $\Ext^i_R(M, N)$ surjects onto a non-zero module, whence it must be non-zero too. We have shown 
    \begin{equation*}
        \sup\left\{i\colon\Ext^i_R(M, N)\ne 0\right\} = t - d = \injdim_R N - \depth M, 
    \end{equation*}
    as desired.
\end{proof}

\begin{corollary}\thlabel{cor:finite-injdim-equals-depth}
    Let $(R,\frakm,k)$ be a Noetherian local ring and $M$ a finite $R$-module. If $\injdim_R M < \infty$, then $\injdim_R M = \depth R$.
\end{corollary}
\begin{proof}
    Using Ischebeck's formula, 
    \begin{equation*}
        \injdim_R M = \depth R + \sup\left\{i\colon\Ext^i_R(R, M)\ne 0\right\} = \depth R,
    \end{equation*}
    as desired.
\end{proof}

\begin{corollary}
    A Gorenstein ring is Cohen-Macaulay.
\end{corollary}
\begin{proof}
    It suffices to prove this in the local case $(R,\frakm,k)$. Due to \thref{cor:finite-injdim-equals-depth}, $\injdim_R R = \depth R$. But due to \thref{rem:ramifications-bass-lemma} (ii), $\injdim_R R\ge\dim R$. It follows that $\depth R = \dim R$ and hence $R$ is Cohen-Macaulay.
\end{proof}

\begin{corollary}
    A Gorenstein Artinian local ring is self-injective.
\end{corollary}
\begin{proof}
    Due to \thref{cor:finite-injdim-equals-depth}, $\injdim_R R = \depth R = 0$.
\end{proof}

\begin{definition}\thlabel{def:socle-general}
    Let $(R,\frakm,k)$ be a Noetherian local ring, $M$ a Cohen-Macaulay $R$-module, and $\ul a = a_1,\dots,a_s\in\frakm$ a maximal $M$-sequence. Then $M/\ul aM$ is Artinian and we  can define 
    \begin{equation*}
        \type(M) = \dim_k\left(\Soc_R\left(M/\ul a M\right)\right).
    \end{equation*}
\end{definition}

We must argue that this defintion is independent of the chosen maximal $M$-sequence. We begin with a 
\begin{lemma}
    Let $R$ be a ring, $M$ and $N$ be $R$-modules, and $a\in\Ann_R(M)$ be a non-zerodivisor on $N$. Then 
    \begin{equation*}
        \Ext^{j + 1}_R(M, N)\cong\Ext^j_R(M, N/aN)\qquad\forall~j\ge 0.
    \end{equation*}
\end{lemma}
\begin{proof}
    Consider the short exact sequence 
    \begin{equation*}
        0\to N\xrightarrow{\cdot a} N\to N/aN\to 0.
    \end{equation*}
    This gives rise to a long exact sequence 
    \begin{equation*}
        \cdots\to\Ext^j_R(M, N)\xrightarrow{\cdot a}\Ext^j_R(M, N)\to\Ext^j_R(M, N/aN)\to\Ext^{j + 1}_R(M, N)\xrightarrow{\cdot a}\Ext^{j + 1}_R(M, N)\to\cdots.
    \end{equation*}
    Since $a$ annihilates $M$, both the above ``multiplication by $a$'' maps have zero image. In particular, this gives an exact sequence 
    \begin{equation*}
        0\to\Ext^j_R(M, N/aN)\to\Ext^{j + 1}_R(M, N)\to 0,
    \end{equation*}
    as desired.
\end{proof}

We return to the setup of \thref{def:socle-general}. Using the above Lemma, we have 
\begin{equation*}
    \Soc_R(M/\ul aM)\cong\Hom_R(R/\frakm, M/\ul a M)\cong\Ext^0_R(k, M)\cong\Ext^s_R(k, M).
\end{equation*}
This characterization is independent of the maximal regular sequence, as desired.

\begin{interlude}[Constructing the minimal injective resolution of $M/aM$ over $R/aR$]\thlabel{inter:constructing-new-minimal-injective-resolution}\hfill
    
    \noindent Let $R$ be a Noetherian ring, $M$ a finite $R$-module, and $a\in R$ a non-zerodivisor on both $M$ and $R$. Let $0\to M\to E^\bullet$ be the minimal injective resolution of $M$ over $R$. Set $\overline R = R/aR$ and $\overline M = M/aM$. Consider the short exact sequence
    \begin{equation*}
        0\to R\xrightarrow{\cdot a} R\to\overline R\to 0
    \end{equation*}
    of $R$-modules. Then $\projdim_R\overline R\le 1$ so that $\Ext^j_R(\overline R, M) = 0$ for all $j > 1$. The above sequence also gives 
    \begin{equation*}
        0\to\Hom_R(\overline R, M)\to\Hom_R(R, M)\xrightarrow{\cdot a}\Hom_R(R, M)\to\Ext^1_R(\overline R, M)\to 0.
    \end{equation*}
    It follows that $\Ext^1_R(\overline R, M)\cong\overline M$.

    Now, consider the complex 
    \begin{equation*}
        0\to\underbrace{\Hom_R(\overline R, M)}_{= 0}\to\Hom_R(\overline R, E^0)\to\Hom_R(\overline R, E^1)\to\Hom_R(\overline R, E^2)\to\cdots.
    \end{equation*}
    Since $\Ext^j_R(\overline R, M) = 0$ for $j\ge 2$, the above complex is exact at $\Hom_R(\overline R, E^j)$ for $j\ge 2$. Further, since $\Ass_R(M) = \Ass_R(E^0)$, it follows that $a$ is a non-zerodivisor on $E^0$, so that $\Hom_R(\overline R, E^0) = 0$. Therefore, 
    \begin{equation*}
        \ker\left(\Hom_R(\overline R, E^1)\to\Hom_R(\overline R, E^2)\right)\cong\Ext^1_R(\overline R, M)\cong\overline M.
    \end{equation*}
    Set $I^j = \Hom_R(\overline R, E^j)$. Then $I^j$ is an injective $\overline R$-module and 
    \begin{equation*}
        0\to \overline M\to I^1\to I^2\to\cdots
    \end{equation*}
    is an injective resolution of $\overline M$ over $\overline R$.

    Finally, we claim that the above resolution is the minimal resolution of $\overline M$ over $\overline R$. Let $\overline\frakp$ be a prime in $\overline R$. We must show that the map 
    \begin{equation*}
        \Hom_{\overline R_{\overline\frakp}}\left(\kappa(\overline\frakp), I^j_{\overline\frakp}\right)\longrightarrow\Hom_{\overline R_{\overline\frakp}}\left(\kappa(\overline\frakp), I^{j + 1}_{\overline\frakp}\right)
    \end{equation*}
    is the zero map. But note that the above is the localization of the map 
    \begin{equation*}
        \Hom_{\overline R}\left(\overline R/\overline\frakp, I^j\right)\longrightarrow\Hom_{\overline R}\left(\overline R/\overline\frakp, I^{j + 1}\right),
    \end{equation*}
    which, due to the Hom-Tensor adjunction is canonically isomorphic to 
    \begin{equation*}
        \Hom_R\left(\overline R/\overline\frakp\otimes_{\overline R}\overline R, I^j\right)\longrightarrow
        \Hom_R\left(\overline R/\overline\frakp\otimes_{\overline R}\overline R, I^{j + 1}\right).
    \end{equation*}
    Finally, since $\overline R/\overline\frakp$ is the same as $R/\frakp$ as $R$-modules, the above map is the same as 
    \begin{equation*}
        \Hom_R\left(R/\frakp, E^j\right)\to\Hom_R\left(R/\frakp, E^{j + 1}\right).
    \end{equation*}
    But it is known that this map is identically zero when localized at $\frakp$, as desired.
\end{interlude}

\begin{theorem}
    Let $(R,\frakm, k, E)$ be a Noetherian local ring, $M$ a finite $R$-module, and $a\in R$ a non-zerodivisor on both $M$ and $R$. Set $\overline M = M/aM$ and $\overline R = R/aR$. Then 
    \begin{equation*}
        \injdim_R M < \infty \iff \injdim_{\overline R}\overline M < \infty.
    \end{equation*}
    In this case, $\injdim_R M = \injdim_{\overline R}\overline M + 1$.
\end{theorem}
\begin{proof}
    Suppose first that $\injdim_R M < \infty$. It is clear from \thref{inter:constructing-new-minimal-injective-resolution} that $\injdim_{\overline R}\overline M < \infty$ and $\injdim_{\overline R}\overline M = \injdim_R M - 1$.

    On the other hand, if $\injdim_R M = \infty$, then $\mu_j(\frakm, M)\ne 0$ for infinitely many $j\ge 0$. But recall that $\Hom_R(\overline R, E) = E_{\overline R}(k)$. Hence, if $E\mid E^j$ for some $j\ge 0$, then $E_{\overline R}(k)\mid I^j$. That is, for $j\ge 1$,
    \begin{equation*}
        \mu_j(\frakm, M)\ne 0\implies\mu_{j - 1}(\overline\frakm,\overline M)\ne 0.
    \end{equation*}
    Hence, $\injdim_{\overline R}\overline M = \infty$. This completes the proof.
\end{proof}

\begin{corollary}\thlabel{cor:gorenstein-iff-quotient-is}
    Let $(R,\frakm,k)$ be a Noetherian local ring and $a\in R$ a non-zerodivisor. Then $R$ is Gorenstein if and only if $R/aR$ is Gorenstein.\hfill\qedsymbol
\end{corollary}

\begin{proposition}
    Let $(R,\frakm,k)$ be a Noetherian local ring. Then the following are equivalent: 
    \begin{enumerate}[label=(\arabic*)]
        \item $R$ is Gorenstein 
        \item $R$ is Cohen-Macaulay and $\type(R) = 1$.
    \end{enumerate}
\end{proposition}
\begin{proof}
    Let $\ul a = a_1,\dots,a_s\in\frakm$ be a maximal $R$-sequence. Due to \thref{cor:gorenstein-iff-quotient-is}, it suffices to show the equivalence for $R/\ul aR$. So $R$ is a depth zero Noetherian local ring. Clearly if $R$ is Gorenstein, then it is self-injective and hence $\type(R) = 1$. Conversely, if $R$ is Cohen-Macaulay, then $\dim R = \depth R = 0$, so that $R$ is an Artinian local ring with $\type(R) = 1$, whence $R$ is self-injective, in particular, Gorenstein.
\end{proof}

\subsection{A closer look at the Artinian case}

\begin{theorem}\thlabel{thm:many-equivalent-conditions}
    Let $(R,\frakm,k, E)$ be an Artinian local ring. Then the following are equivalent: 
    \begin{enumerate}[label=(\arabic*)]
        \item $\idim_R(R) < \infty$,
        \item $R$ is self-injective,
        \item $R\cong E$ as $R$-modules,
        \item The ideal $(0)\nor R$ is irreducible,
        \item $\dim_k\left(\Soc_R(R)\right) = 1$,
        \item for all ideals $I\subseteq R$, $\left(0 :_R \left(0 :_R I\right)\right) = I$.
    \end{enumerate}
\end{theorem}
\begin{proof}
    $(3)\implies(2)\implies(1)$ is clear. The implication $(1)\implies(3)$ follows from \thref{cor:finite-injdim-equals-depth} so that $R$ is self-injective, and hence, due to \thref{thm:equivalent-self-injective}, $R\cong E$ as $R$-modules.

    $(3)\implies(6)$ is a consequence of \thref{thm:matlis-duality-version-2}.

    $(6)\implies(5)$ If $0\ne a\in\Soc_R(R)$, then $\Ann_R(a) = \frakm$. As a result, 
    \begin{equation*}
        \Soc_R(R) = \left(0:_R \frakm\right) = \left(0:_R\left(0:_R a\right)\right) = (a),
    \end{equation*}
    whence $\dim_k\left(\Soc_R(R)\right) = 1$. 

    $(5)\implies(3)$ is again a consequence of \thref{thm:equivalent-self-injective}.

    $(5)\implies(4)$ If $0\ne I$ is any ideal of $R$, then $I\cap\Soc_R(R)\ne 0$, and hence, $\Soc_R(R)\subseteq I$, since the former is a simple $R$-module. In particular, this means that the intersection of two non-trivial ideals of $R$ must contain the socle, and hence, must be non-zero; i.e., $(0)$ is an irreducible ideal. 

    $(4)\implies(5)$ If $\dim_k\left(\Soc_R(R)\right)\ne 1$, then $\dim_k\left(\Soc_R(R)\right)\ge 2$\footnote{Since $\frakm\in\Ass_R(R)$.}. Let $a,b\in\Soc_R(R)$ be linearly independent over $k$. Then $(a) = ka$ and $(b) = kb$. Thus $(a)\cap (b) = (0)$, i.e., $(0)$ is not an irreducible ideal, a contradiction.
\end{proof}

\begin{proposition}
    The following are equivalent to the (equivalent) conditions of \thref{thm:many-equivalent-conditions}: 
    \begin{enumerate}[label=(\arabic*)]
        \setcounter{enumi}{6}
        \item $R$ has a unique minimal non-zero ideal, 
        \item $\projdim_R E < \infty$, 
        \item $E$ is free, 
        \item $E$ is cyclic, 
        \item Given any submodule $W\subseteq E$, $\left(0:_R\left(0:_R W\right)\right)\cong W$, 
        \item $E$ has a unique maximal proper submodule.
    \end{enumerate}
\end{proposition}
\begin{proof}
    $(7)\implies(4)$ Let $\fraka\noreq R$ be the unique non-zero minimal ideal. Let $I\noreq R$ be a non-zero ideal. Since $R$ is Artinian, $I$ contains a minimal non-zero ideal, say $\frakb$, which, due to uniqueness, must be equal to $\fraka$. Hence, every non-zero ideal of $R$ contains $\fraka$. It follows that $(0)$ is an irreducible ideal.

    $(5)\implies(7)$ It is clear that $\Soc_R(R)$ is a minimal ideal. Further, since $\Soc_R(R)\subseteq R$ is essential, the socle must be contained in every non-zero ideal as was argued in the preceding proof.

    $(8)\implies(1)$ follows by taking a finite projective (and hence free) resolution of $E$ and then taking its Matlis dual, which gives a finite injective resolution of $R$.

    $(1)\implies(8)$ follows similarly by taking a finite injective resolution of $R$ and then taking its Matlis dual.

    $(9)\implies(3)$ Suppose $E\cong R^{\oplus d}$. Then 
    \begin{equation*}
        \lambda_R(R) = \lambda_R(R^\vee) = \lambda_R(E) = d\lambda_R(R)\implies d = 1.  \end{equation*}
    Thus $R\cong E$. The implication $(3)\implies(9)$ is clear.

    $(10)\implies(3)$ If $E\cong R/I$, then 
    \begin{equation*}
        \lambda_R(R) - \lambda_R(I) = \lambda_R(E) = \lambda_R(R^\vee) = \lambda(R),
    \end{equation*}
    whence $\lambda_R(I) = 0$, i.e., $I = 0$. Thus $R\cong E$. The converse $(3)\implies(10)$ is once again clear.

    % TODO: Equivalence of (11)

    Through \thref{thm:matlis-duality-version-2}, the equivalence $(7)\iff(12)$ is clear, thereby completing the proof.
\end{proof}

\subsection{Fibres of a flat map}

\begin{theorem}\thlabel{thm:fibres-faithfully-flat-map}
    Let $\varphi: (R,\frakm_R, k)\to(S,\frakm_S,\ell)$ be a flat map with $\varphi(\frakm_R)\subseteq\frakm_S$. Then 
    \begin{enumerate}[label=(\arabic*)]
        \item $\dim R + \dim S/\frakm_R S = \dim S$.
        \item if $\frakm_RS = \frakm_S$, then for any $R$-module $M$ of finite length, $\lambda_R(M) = \lambda_S(M\otimes_R S)$.
        \item if $\ul a = a_1,\dots,a_n\in\frakm_S$ is $S/\frakm_R S$-regular, then $a_1,\dots,a_n$ is $S$-regular and $R\to S/(\ul a)$ is flat.
        \item $\depth R + \depth S/\frakm_R S = \depth S$.
        \item $S$ is Cohen-Macaulay if and only if $R$ and $S/\frakm_R S$ are so. 
        \item $S$ is Gorenstein if and only if $R$ and $S/\frakm_R S$ are so.
    \end{enumerate}
\end{theorem}

\end{document}